{"ast":null,"code":"var _jsxFileName = \"/Users/mackyandow/personal-projects/road-ahead-app/client/src/context/UserAuthProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserAuthContext = /*#__PURE__*/React.createContext();\nexport const UserAuthProvider = props => {\n  _s();\n\n  const initState = {\n    user: JSON.parse(localStorage.getItem(\"user\")) || {},\n    token: localStorage.getItem(\"token\") || \"\",\n    errMsg: \"\"\n  };\n  const [userState, setUserState] = useState(initState);\n\n  function signup(credentials) {\n    axios.post(\"/auth/signup\", credentials).then(res => {\n      const {\n        user,\n        token\n      } = res.data;\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      setUserState(prevUserState => ({ ...prevUserState,\n        user,\n        token\n      }));\n    }).catch(err => handleAuthError(err.response.data.errMsg));\n  }\n\n  function login(credentials) {\n    axios.post(\"/auth/login\", credentials).then(res => {\n      const {\n        user,\n        token\n      } = res.data;\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      setUserState(prevUserState => ({ ...prevUserState,\n        user,\n        token\n      }));\n    }).catch(err => handleAuthError(err.response.data.errMsg));\n  }\n\n  function logout() {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    setUserState({\n      user: {},\n      token: \"\"\n    });\n  }\n\n  function handleAuthError(errMsg) {\n    setUserState(prevState => ({ ...prevState,\n      errMsg\n    }));\n  }\n\n  function authErrorReset() {\n    setUserState(prevState => ({ ...prevState,\n      errMsg: \"\"\n    }));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(UserAuthContext.Provider, {\n      value: { ...userState,\n        signup,\n        login,\n        handleAuthError,\n        authErrorReset\n      },\n      children: props.children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n\n_s(UserAuthProvider, \"movQNeVdcQgx3HxMzPHgR+E3Pqk=\");\n\n_c = UserAuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserAuthProvider\");","map":{"version":3,"sources":["/Users/mackyandow/personal-projects/road-ahead-app/client/src/context/UserAuthProvider.js"],"names":["React","useState","axios","UserAuthContext","createContext","UserAuthProvider","props","initState","user","JSON","parse","localStorage","getItem","token","errMsg","userState","setUserState","signup","credentials","post","then","res","data","setItem","stringify","prevUserState","catch","err","handleAuthError","response","login","logout","removeItem","prevState","authErrorReset","children"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport axios from 'axios'\n\nexport const UserAuthContext = React.createContext()\n\nexport const UserAuthProvider = (props) => {\n\n    const initState = {\n        user: JSON.parse(localStorage.getItem(\"user\")) || {},\n        token: localStorage.getItem(\"token\") || \"\",\n        errMsg: \"\",\n      };\n\n    const [userState, setUserState] = useState(initState)\n\n    function signup(credentials){\n        axios\n            .post(\"/auth/signup\", credentials)\n            .then((res) => {\n                const { user, token } = res.data\n                localStorage.setItem(\"token\", token );\n                localStorage.setItem(\"user\", JSON.stringify(user))\n                setUserState((prevUserState) => ({\n                    ...prevUserState,\n                    user,\n                    token\n                }))\n            })\n            .catch((err) => handleAuthError(err.response.data.errMsg)) \n    }\n\n    function login(credentials){\n        axios\n            .post(\"/auth/login\", credentials)\n            .then((res) => {\n                const { user, token } = res.data\n                localStorage.setItem(\"token\", token );\n                localStorage.setItem(\"user\", JSON.stringify(user))\n                setUserState((prevUserState) => ({\n                    ...prevUserState,\n                    user,\n                    token\n                }))\n            })\n            .catch((err) => handleAuthError(err.response.data.errMsg)) \n    }\n\n    function logout() {\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"user\");\n        setUserState({\n          user: {},\n          token: \"\",\n        });\n      }\n\n    function handleAuthError(errMsg) {\n        setUserState((prevState) => ({\n          ...prevState,\n          errMsg,\n        }));\n      }\n    \n      function authErrorReset() {\n        setUserState((prevState) => ({\n          ...prevState,\n          errMsg: \"\",\n        }));\n      }\n    return (\n\n\n\n\n        <div>\n            <UserAuthContext.Provider value={{\n                ...userState,\n                signup,\n                login,\n                handleAuthError,\n                authErrorReset\n\n            }}>\n                {props.children}\n            </UserAuthContext.Provider>\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}