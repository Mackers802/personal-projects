{"ast":null,"code":"var _jsxFileName = \"/Users/mackyandow/V_School/DEV/Assignments/level-6/photo-app/client/src/context/PostProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PostProviderContext = /*#__PURE__*/React.createContext();\nexport const PostProvider = props => {\n  _s();\n\n  // ----------- Axios token interceptor ------------------------\n  const postsAxios = axios.create();\n  postsAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  }); //  ----------- State ------------------------------------------\n  // const initState = {\n  //   posts: [],\n  //   userPosts: [],\n  //   comments: [],\n  // };\n\n  const [postsState, setPostsState] = useState();\n  useEffect(() => {\n    console.log(posts);\n    getAllPosts(); // setMakesModelsLens(lensDataFile);\n    // setInputs(initInput)\n    // console.log(\"selected\", selected)\n  }, []); //  ----------- Functions --------------------------------------\n\n  function getAllPosts() {\n    postsAxios.get(\"/api/posts\").then(res => {\n      console.log(res);\n      setPostsState(prevState => ({ ...prevState,\n        posts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function newPost(newPost) {\n    postsAxios.post(\"/api/posts\", newPost).then(res => {\n      console.log(\"res\", res);\n      setPostsState(prevState => ({ ...prevState,\n        posts: [...prevState.posts, res.data]\n      })); // getUserPosts()\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function getUserPosts(_id) {\n    postsAxios.get(`/api/posts/${_id}`).then(res => {\n      setPostsState(prevState => ({ ...prevState,\n        userPosts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function search(selected) {\n    console.log(\"search function selected\", selected);\n    postsAxios.get(`/api/posts/search/camera/type?type=${selected}`).then(res => {\n      console.log(res);\n      setPostsState((...prevState) => ({ ...prevState,\n        posts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function searchByStyle(style) {\n    // console.log(\"camera\", camera)\n    postsAxios.get(`/api/posts/search/camera/type?type=${style}`).then(res => {\n      console.log(res);\n      setPostsState((...prevState) => ({ ...prevState,\n        posts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function searchByCamera(camera) {\n    // console.log(\"camera\", camera)\n    postsAxios.get(`/api/posts/search/camera/type?type=${camera}`).then(res => {\n      console.log(res);\n      setPostsState((...prevState) => ({ ...prevState,\n        posts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function searchByLens(lens) {\n    postsAxios.get(`/api/posts/search/lens/type?type=${lens}`).then(res => {\n      console.log(res);\n      setPostsState((...prevState) => ({ ...prevState,\n        posts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  return /*#__PURE__*/_jsxDEV(PostProviderContext.Provider, {\n    value: { ...postsState,\n      getAllPosts,\n      getUserPosts,\n      newPost,\n      searchByCamera,\n      searchByLens,\n      searchByStyle,\n      search\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostProvider, \"2uXpB6YRqwLpRPT2ZHl8g7WidYM=\");\n\n_c = PostProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostProvider\");","map":{"version":3,"sources":["/Users/mackyandow/V_School/DEV/Assignments/level-6/photo-app/client/src/context/PostProvider.js"],"names":["React","useState","useEffect","axios","PostProviderContext","createContext","PostProvider","props","postsAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","postsState","setPostsState","console","log","posts","getAllPosts","get","then","res","prevState","data","catch","err","response","errMsg","newPost","post","getUserPosts","_id","userPosts","search","selected","searchByStyle","style","searchByCamera","camera","searchByLens","lens","children"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nexport const PostProviderContext = React.createContext();\n\nexport const PostProvider = (props) => {\n  // ----------- Axios token interceptor ------------------------\n  const postsAxios = axios.create();\n  postsAxios.interceptors.request.use((config) => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  });\n\n  //  ----------- State ------------------------------------------\n  // const initState = {\n  //   posts: [],\n  //   userPosts: [],\n  //   comments: [],\n  // };\n  const [postsState, setPostsState] = useState();\n\n  useEffect(() => {\n    console.log(posts)\n    getAllPosts()\n    // setMakesModelsLens(lensDataFile);\n    // setInputs(initInput)\n    // console.log(\"selected\", selected)\n}, []);\n\n  //  ----------- Functions --------------------------------------\n\n  function getAllPosts() {\n    postsAxios\n      .get(\"/api/posts\")\n      .then((res) => {\n        console.log(res);\n        setPostsState((prevState) => ({\n          ...prevState,\n          posts: res.data,\n        }));\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function newPost(newPost) {\n    postsAxios\n      .post(\"/api/posts\", newPost)\n      .then((res) => {\n        console.log(\"res\", res);\n        setPostsState((prevState) => ({\n          ...prevState,\n          posts: [...prevState.posts, res.data],\n        }));\n        // getUserPosts()\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function getUserPosts(_id) {\n    postsAxios\n      .get(`/api/posts/${_id}`)\n      .then((res) => {\n        setPostsState((prevState) => ({\n          ...prevState,\n          userPosts: res.data,\n        }));\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function search(selected) {\n    console.log(\"search function selected\", selected)\n      postsAxios\n      .get(`/api/posts/search/camera/type?type=${selected}`)\n      .then((res) => {\n          console.log(res)\n          setPostsState((...prevState ) => ({\n              ...prevState,\n              posts: res.data\n          }))\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function searchByStyle(style) {\n    // console.log(\"camera\", camera)\n      postsAxios\n      .get(`/api/posts/search/camera/type?type=${style}`)\n      .then((res) => {\n          console.log(res)\n          setPostsState((...prevState ) => ({\n              ...prevState,\n              posts: res.data\n          }))\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function searchByCamera(camera) {\n    // console.log(\"camera\", camera)\n      postsAxios\n      .get(`/api/posts/search/camera/type?type=${camera}`)\n      .then((res) => {\n          console.log(res)\n          setPostsState((...prevState ) => ({\n              ...prevState,\n              posts: res.data\n          }))\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function searchByLens(lens) {\n    postsAxios\n    .get(`/api/posts/search/lens/type?type=${lens}`)\n    .then((res) => {\n      console.log(res)\n      setPostsState((...prevState ) => ({\n          ...prevState,\n          posts: res.data\n      }))\n  })\n    .catch((err) => console.log(err.response.data.errMsg));\n}\n\n  return (\n    <PostProviderContext.Provider\n      value={{\n        ...postsState,\n        getAllPosts,\n        getUserPosts,\n        newPost,\n        searchByCamera,\n        searchByLens,\n        searchByStyle,\n        search\n      }}\n    >\n      {props.children}\n    </PostProviderContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}