{"ast":null,"code":"var _jsxFileName = \"/Users/mackyandow/V_School/DEV/Assignments/level-6/photo-app/client/src/context/PostProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const PostProviderContext = /*#__PURE__*/React.createContext();\nexport const PostProvider = props => {\n  _s();\n\n  // ----------- Axios token interceptor ------------------------\n  const postsAxios = axios.create();\n  postsAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  }); //  ----------- State ------------------------------------------\n\n  const initState = {\n    posts: [],\n    userPosts: [],\n    comments: []\n  };\n  const [postsState, setPostsState] = useState(initState); //  ----------- Functions --------------------------------------\n\n  function getAllPosts() {\n    postsAxios.get(\"/api/posts\").then(res => {\n      console.log(res);\n      setPostsState(prevState => ({ ...prevState,\n        posts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function newPost(newPost) {\n    postsAxios.post(\"/api/posts\", newPost).then(res => {\n      console.log(\"res\", res);\n      setPostsState(prevState => ({ ...prevState,\n        posts: [...prevState.posts, res.data]\n      })); // getUserPosts()\n    }).catch(err => console.log(err.response.data.errMsg));\n  }\n\n  function getUserPosts(_id) {\n    console.log(\"userPosts\");\n    postsAxios.get(`/api/posts/${_id}`).then(res => {\n      setPostsState(prevState => ({ ...prevState,\n        userPosts: res.data\n      }));\n    }).catch(err => console.log(err.response.data.errMsg));\n  } // function search(selected) {\n  //     postsAxios\n  //     .get(`/api/posts/search/style?style=${selected.style}`)\n  //     .then((res) => {\n  //       // console.log(res)\n  //         setPostsState((...prevState ) => ({\n  //             ...prevState,\n  //             posts: res.data\n  //         }))\n  //     })\n  //     .catch((err) => console.log(err.response.data.errMsg));\n  // }\n  // function searchByStyle(selectedStyle) {\n  //   console.log(\"searchByStyle\", selectedStyle)\n  // postsAxios\n  // .get(`/api/posts/search/camera/type?type=${style}`)\n  // .then((res) => {\n  //     console.log(res)\n  //     setPostsState((...prevState ) => ({\n  //         ...prevState,\n  //         posts: res.data\n  //     }))\n  // })\n  // .catch((err) => console.log(err.response.data.errMsg));\n  // }\n  // function searchByCameraBrand(selectedCameraBrand){\n  //   console.log(\"SearchByCameraBrand\", selectedCameraBrand)\n  // }\n  // function searchByCameraModel(selectedCameraModel){\n  //   console.log(\"SearchByCameraModel\", selectedCameraModel)\n  // }\n  // function searchByLensBrand(selectedLensBrand){\n  //   console.log(\"SearchByLensBrand\", selectedLensBrand)\n  // }\n  // function searchByLensModel(selectedLensModel){\n  //   console.log(\"SearchByLensModel\", selectedLensModel)\n  // }\n  //   function searchByCamera(camera) {\n  //     // console.log(\"camera\", camera)\n  //       postsAxios\n  //       .get(`/api/posts/search/camera/type?type=${camera}`)\n  //       .then((res) => {\n  //           console.log(res)\n  //           setPostsState((...prevState ) => ({\n  //               ...prevState,\n  //               posts: res.data\n  //           }))\n  //       })\n  //       .catch((err) => console.log(err.response.data.errMsg));\n  //   }\n  //   function searchByLens(lens) {\n  //     postsAxios\n  //     .get(`/api/posts/search/lens/type?type=${lens}`)\n  //     .then((res) => {\n  //       console.log(res)\n  //       setPostsState((...prevState ) => ({\n  //           ...prevState,\n  //           posts: res.data\n  //       }))\n  //   })\n  //     .catch((err) => console.log(err.response.data.errMsg));\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(PostProviderContext.Provider, {\n    value: { ...postsState,\n      getAllPosts,\n      getUserPosts,\n      newPost,\n      search // searchByStyle,\n      // searchByCameraBrand,\n      // searchByCameraModel,\n      // searchByLensBrand,\n      // searchByLensModel\n\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n};\n\n_s(PostProvider, \"GFxJDE2uRzvPmRyvQZEbFoD2MD0=\");\n\n_c = PostProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostProvider\");","map":{"version":3,"sources":["/Users/mackyandow/V_School/DEV/Assignments/level-6/photo-app/client/src/context/PostProvider.js"],"names":["React","useState","axios","PostProviderContext","createContext","PostProvider","props","postsAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","initState","posts","userPosts","comments","postsState","setPostsState","getAllPosts","get","then","res","console","log","prevState","data","catch","err","response","errMsg","newPost","post","getUserPosts","_id","search","children"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nexport const PostProviderContext = React.createContext();\n\nexport const PostProvider = (props) => {\n  // ----------- Axios token interceptor ------------------------\n  const postsAxios = axios.create();\n  postsAxios.interceptors.request.use((config) => {\n    const token = localStorage.getItem(\"token\");\n    config.headers.Authorization = `Bearer ${token}`;\n    return config;\n  });\n\n  //  ----------- State ------------------------------------------\n  const initState = {\n    posts: [],\n    userPosts: [],\n    comments: [],\n  };\n  const [postsState, setPostsState] = useState(initState);\n\n  //  ----------- Functions --------------------------------------\n\n  function getAllPosts() {\n    postsAxios\n      .get(\"/api/posts\")\n      .then((res) => {\n        console.log(res);\n        setPostsState((prevState) => ({\n          ...prevState,\n          posts: res.data,\n        }));\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function newPost(newPost) {\n    postsAxios\n      .post(\"/api/posts\", newPost)\n      .then((res) => {\n        console.log(\"res\", res);\n        setPostsState((prevState) => ({\n          ...prevState,\n          posts: [...prevState.posts, res.data],\n        }));\n        // getUserPosts()\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  function getUserPosts(_id) {\n    console.log(\"userPosts\")\n    postsAxios\n      .get(`/api/posts/${_id}`)\n      .then((res) => {\n        setPostsState((prevState) => ({\n          ...prevState,\n          userPosts: res.data,\n        }));\n      })\n      .catch((err) => console.log(err.response.data.errMsg));\n  }\n\n  // function search(selected) {\n  //     postsAxios\n  //     .get(`/api/posts/search/style?style=${selected.style}`)\n  //     .then((res) => {\n  //       // console.log(res)\n  //         setPostsState((...prevState ) => ({\n  //             ...prevState,\n  //             posts: res.data\n  //         }))\n  //     })\n  //     .catch((err) => console.log(err.response.data.errMsg));\n  // }\n\n  // function searchByStyle(selectedStyle) {\n  //   console.log(\"searchByStyle\", selectedStyle)\n      // postsAxios\n      // .get(`/api/posts/search/camera/type?type=${style}`)\n      // .then((res) => {\n      //     console.log(res)\n      //     setPostsState((...prevState ) => ({\n      //         ...prevState,\n      //         posts: res.data\n      //     }))\n      // })\n      // .catch((err) => console.log(err.response.data.errMsg));\n  // }\n\n  // function searchByCameraBrand(selectedCameraBrand){\n  //   console.log(\"SearchByCameraBrand\", selectedCameraBrand)\n  // }\n\n  // function searchByCameraModel(selectedCameraModel){\n  //   console.log(\"SearchByCameraModel\", selectedCameraModel)\n  // }\n\n  // function searchByLensBrand(selectedLensBrand){\n  //   console.log(\"SearchByLensBrand\", selectedLensBrand)\n  // }\n\n  // function searchByLensModel(selectedLensModel){\n  //   console.log(\"SearchByLensModel\", selectedLensModel)\n  // }\n//   function searchByCamera(camera) {\n//     // console.log(\"camera\", camera)\n//       postsAxios\n//       .get(`/api/posts/search/camera/type?type=${camera}`)\n//       .then((res) => {\n//           console.log(res)\n//           setPostsState((...prevState ) => ({\n//               ...prevState,\n//               posts: res.data\n//           }))\n//       })\n//       .catch((err) => console.log(err.response.data.errMsg));\n//   }\n\n//   function searchByLens(lens) {\n//     postsAxios\n//     .get(`/api/posts/search/lens/type?type=${lens}`)\n//     .then((res) => {\n//       console.log(res)\n//       setPostsState((...prevState ) => ({\n//           ...prevState,\n//           posts: res.data\n//       }))\n//   })\n//     .catch((err) => console.log(err.response.data.errMsg));\n// }\n\n  return (\n    <PostProviderContext.Provider\n      value={{\n        ...postsState,\n        getAllPosts,\n        getUserPosts,\n        newPost,\n        search,\n        // searchByStyle,\n        // searchByCameraBrand,\n        // searchByCameraModel,\n        // searchByLensBrand,\n        // searchByLensModel\n      }}\n    >\n      {props.children}\n    </PostProviderContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}